<!DOCTYPE HTML>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core">

<f:view>
    <f:metadata>
    <!-- Start a new process instance. The Process Definition Key is read internally from
    request parameters and cached in the CDI conversation scope.
    -->
        <f:event type="preRenderView" listener="#{camundaTaskForm.startTaskForm()}" />
    </f:metadata>
    <h:head>
        <title>Acknowledge order</title>
    </h:head>
    <h:body>
        <h1>Order overview</h1>
        <p>

            <label for="customer">Customer:     </label>
            <h:outputText id="customer" value="#{acknowledgeOrderController.orderDAO.customer}" />
        </p>
        <p>
            <label for="specification">Specification:   </label>
            <h:outputText id="specification" value="#{acknowledgeOrderController.orderDAO.specification}" />
        </p>

        <h3>Bill of Material: missing materials</h3>
        <h:form id="submitForm">
            <h:dataTable id="ack-table" value="#{acknowledgeOrderController.orderDAO.missingMaterials}" var="entry" border="1">
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="ArticleId" />
                    </f:facet>
                    <h:outputText value="#{entry.material.articleId}" />
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Description" />
                    </f:facet>
                    <h:outputText value="#{entry.material.description}" />
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Amount" />
                    </f:facet>
                    <h:outputText value="#{entry.amountMissing}" />
                </h:column>
            </h:dataTable>
            <!-- The button starts a new process instance. This ends the conversation and redirects us to the tasklist.

            NOTE: Syntax is different when working on user task forms, see file "approveLoanRequest.xhtml".
            -->
            <h:commandButton id="submit_button" value="Acknowledge order" action="#{acknowledgeOrderController.acknowledgeOrder()}" />

            <h:messages style="color:red;margin:8px;" />
        </h:form>
    </h:body>
</f:view>
</html>
